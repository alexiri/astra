{% extends 'core/base.html' %}

{% block title %}Settings - Password{% endblock %}

{% block header %}
  <h1 class="m-0">Settings for <a href="{% url 'profile' %}">{{ request.user.get_username }}</a></h1>
{% endblock %}

{% block content %}
<div class="settings-page">
  <div class="card settings-card mt-3">
    <div class="card-header p-0 alx-card-tabs-header">
      {% include 'core/_settings_tabs.html' %}
    </div>
    <div class="card-body">
    <form method="post" novalidate>
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="alert alert-danger">{{ form.non_field_errors }}</div>
      {% endif %}

      <div class="form-group">
        <label for="{{ form.current_password.id_for_label }}">{{ form.current_password.label }}</label>
        {{ form.current_password }}
        {% if form.current_password.errors %}<div class="text-danger">{{ form.current_password.errors }}</div>{% endif %}
      </div>

      {% if using_otp %}
      <div class="form-group" id="otpinput">
        <label for="{{ form.otp.id_for_label }}">{{ form.otp.label }}</label>
        {{ form.otp }}
        {% if form.otp.errors %}<div class="text-danger">{{ form.otp.errors }}</div>{% endif %}
        <small class="form-text text-muted">Your account has OTP enabled; enter your current OTP.</small>
      </div>
      {% endif %}

      <div class="form-group">
        <label for="{{ form.new_password.id_for_label }}">{{ form.new_password.label }}</label>
        {{ form.new_password }}
        {% if form.new_password.errors %}<div class="text-danger">{{ form.new_password.errors }}</div>{% endif %}
      </div>

      <div class="form-group">
        <label for="{{ form.confirm_new_password.id_for_label }}">{{ form.confirm_new_password.label }}</label>
        {{ form.confirm_new_password }}
        {% if form.confirm_new_password.errors %}<div class="text-danger">{{ form.confirm_new_password.errors }}</div>{% endif %}
      </div>

      <button type="submit" class="btn btn-danger">Change password</button>
    </form>
    </div>
  </div>
</div>
{% endblock %}
